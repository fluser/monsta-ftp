<div id="files" ng-controller="FileBrowserController as vm" ng-mousedown="vm.handleBodyClick($event)" oncontextmenu="return false">
    <ng-include src="'application/frontend/templates/body-order-by.html'"></ng-include>
    <div class="dropdown">
        <button data-toggle="dropdown" style="display: none" id="extras-dropdown-button"></button>
        <ul class="dropdown-menu" id="extras-dropdown">
            <li ng-click="vm.initiateMakeItem('folder')">
                <a href="#">
                    <i class="fa fa-folder-o fa-fw"></i> {{ 'NEW_FOLDER_DEFERRED_ACTION'|translate }}
                </a>
            </li>
            <li role="separator" class="divider"></li>
            <li data-name="paste" ng-click="vm.performPaste()">
                <a href="#" ng-class="{inactive: !hasPasteSource}" >
                    <i class="fa fa-clipboard fa-fw"></i> {{ 'PASTE_ACTION'|translate }}
                </a>
            </li>
        </ul>
    </div>
    <table>
        <thead class="mobile-hide">
            <tr>
                <td class="spacer"></td>
                <td class="icon"></td>
                <td class="file">
                    <span ng-click="reorder($event)" data-sort-name="name" data-sort-dir="">
                        {{ "NAME"|translate }}
                        <i ng-show="sortName == 'name'" class="fa"
                           ng-class="{'fa-caret-up': !sortReversed, 'fa-caret-down': sortReversed}" aria-hidden="true"></i>
                    </span>
                </td>
                <td class="spacer"></td>
                <td class="size">
                    <span ng-click="reorder($event)" data-sort-name="size" data-sort-dir="">
                        {{ "SIZE"|translate }}
                        <i ng-show="sortName == 'size'" class="fa"
                           ng-class="{'fa-caret-up': !sortReversed, 'fa-caret-down': sortReversed}" aria-hidden="true"></i>
                    </span>
                </td>
                <td class="modified">
                    <span ng-click="reorder($event)" data-sort-name="modified" data-sort-dir="">
                        {{ "CHANGED"|translate }}
                        <i ng-show="sortName == 'modified'" class="fa"
                           ng-class="{'fa-caret-up': !sortReversed, 'fa-caret-down': sortReversed}" aria-hidden="true"></i>
                    </span>
                </td>
                <td class="spacer"></td>
                <td class="permissions">
                    {{ "PERMISSIONS"|translate }}
                </td>
                <td class="other"></td>
                <td class="spacer"></td>
            </tr>
        </thead>
        <tbody>
            <tr ng-if="vm.uiOperationFactory.currentDirectory != null && vm.uiOperationFactory.currentDirectory != '' && vm.uiOperationFactory.currentDirectory != '/'">
                <td class="spacer"></td>
                <td class="icon" ng-click="vm.navigateUpOneLevel()">
                    <i class="fa fa-level-up fa-fw"></i>
                </td>
                <td class="file">
                    <span class="up" ng-click="vm.navigateUpOneLevel()">..</span>
                </td>
                <td class="spacer"></td>
                <td class="size"></td>
                <td class="modified mobile-hide"></td>
                <td class="spacer mobile-hide"></td>
                <td class="permissions mobile-hide"></td>
                <td class="other"></td>
                <td class="spacer mobile-hide"></td>
            </tr>
            <tr ng-repeat="item in directoryList" ng-class-odd="'tr-odd'" ng-class-even="'tr-even'"
                ng-class="{'ui-selected': selectedItems.indexOf($index) != -1}"
                class="context-catcher-tr"
                ng-mousedown="vm.rowMouseDown($event)"
                ng-mousemove="vm.rowMouseMove($event, $index)"
                ng-mouseup="vm.rowMouseUp($index)"
                ng-mouseleave="vm.rowMouseLeave($event)"
                data-index="{{ $index }}">
                <td class="spacer"></td>
                <td class="icon">
                    <i class="fa {{ item|icon }} fa-fw"></i>
                </td>
                <td class="file">
                    <div class="dropdown file-toolbar">
                        <button data-toggle="dropdown" class="context-catcher-button">
                            <i class="fa fa-caret-down"></i>
                        </button>
                        <div class="file-wrapper">
                            <span ng-click="handleClick($event, $index)">{{ item.name|spaces_to_nbsp }}</span>
                        </div>
                        <ul class="dropdown-menu">
                            <li title="Open" ng-click="handleClick($event)" ng-show="item.isDirectory">
                                <a href="#">
                                    <i class="fa fa-fw fa-folder-open-o"></i> {{"OPEN_ACTION"|translate}}
                                </a>
                            </li>
                            <li title="Edit File" ng-click="editItem(item)" ng-show="vm.itemIsEditable(item.isDirectory, item.name)">
                                <a href="#">
                                    <i class="fa fa-fw fa-pencil"></i> {{"EDIT_ACTION"|translate}}
                                </a>
                            </li>
                            <li title="Download" ng-click="downloadItem(item)" ng-hide="item.isDirectory">
                                <a href="#">
                                    <i class="fa fa-fw fa-download"></i> {{"DOWNLOAD_ACTION"|translate}}
                                </a>
                            </li>
                            <li role="separator" class="divider"></li>
                            <li title="Cut" ng-click="initiateCutOfItem(item)">
                                <a href="#">
                                    <i class="fa fa-fw fa-scissors"></i> {{"CUT_ACTION"|translate}}
                                </a>
                            </li>
                            <li title="Copy" ng-click="initiateCopyOfItem(item)">
                                <a href="#">
                                    <i class="fa fa-fw fa-clone"></i> {{"COPY_ACTION"|translate}}
                                </a>
                            </li>
                            <li title="Rename" ng-click="initiateRenameOfItem(item)">
                                <a href="#">
                                       <i class="fa fa-fw fa-i-cursor">_</i> {{"RENAME_DEFERRED_ACTION"|translate}}
                                </a>
                            </li>
                            <li title="Delete" ng-click="initiateDeleteOfItem(item)">
                                <a href="#">
                                    <i class="fa fa-fw fa-trash-o"></i> {{"DELETE_DEFERRED_ACTION"|translate}}
                                </a>
                            </li>
                            <li title="CHMOD" ng-click="initiateChmodOfItem(item)">
                                <a href="#">
                                    <i class="fa fa-fw fa-key"></i> {{"CHMOD_ACTION"|translate}}
                                </a>
                            </li>
                            <li role="separator" class="divider"></li>
                            <li data-name="new-folder" ng-click="vm.showProperties(item)">
                                <a href="#">
                                    <i class="fa fa-info-circle fa-fw"></i> {{ 'PROPERTIES'|translate }}
                                </a>
                            </li>
                        </ul>
                    </div>
                </td>
                <td class="spacer"></td>
                <td class="size">
                    <span ng-show="!item.isDirectory">{{ item.size|file_size }}</span>
                </td>
                <td class="modified mobile-hide">
                    {{ item.modificationDate|file_last_modified }}
                </td>
                <td class="spacer mobile-hide"></td>
                <td class="permissions mobile-hide">
                    <span ng-click="initiateChmodOfItem(item)">{{ item|item_permission_description }}</span>
                </td>
                <td class="other" ng-click="vm.showProperties(item)" title="{{ 'PROPERTIES'|translate }}">
                    <i class="fa fa-ellipsis-v"></i>
                </td>
                <td class="spacer mobile-hide"></td>
            </tr>
        </tbody>
    </table>
</div>